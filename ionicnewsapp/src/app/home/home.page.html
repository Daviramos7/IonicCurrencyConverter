<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Conversor de Moedas</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/history">
        <ion-icon slot="icon-only" name="time"></ion-icon>
      </ion-button>
      <ion-button routerLink="/chart">
        <ion-icon slot="icon-only" name="bar-chart"></ion-icon>
      </ion-button>
      <ion-button routerLink="/settings">
        <ion-icon slot="icon-only" name="settings"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  
  <ion-item>
    <ion-label position="stacked">Valor</ion-label>
    <ion-input type="number" [(ngModel)]="amount" (ionChange)="convert()"></ion-input>
  </ion-item>

  <ion-grid>
    <ion-row class="ion-align-items-center">
      
      <ion-col size="5">
        <ion-item>
          <ion-label>De</ion-label>
          <ion-select [(ngModel)]="from" cancelText="Fechar" (ionChange)="convert()">
            <ion-select-option *ngFor="let c of currencies" [value]="c">{{c}}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>

      <ion-col size="2" class="ion-text-center">
        <ion-button (click)="invert()" fill="clear" color="primary">
          <ion-icon slot="icon-only" name="swap-horizontal"></ion-icon>
        </ion-button>
      </ion-col>

      <ion-col size="5">
        <ion-item>
          <ion-label>Para</ion-label>
          <ion-select [(ngModel)]="to" cancelText="Fechar" (ionChange)="convert()">
            <ion-select-option *ngFor="let c of currencies" [value]="c">{{c}}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col> </ion-row>
  </ion-grid>

  <ion-button expand="block" (click)="convert()" [disabled]="loading">
    <ion-spinner *ngIf="loading" name="dots"></ion-spinner>
    <span *ngIf="!loading">Converter</span>
  </ion-button>

  <div *ngIf="result !== null" class="result ion-padding ion-text-center">
    <h2>{{ amount }} {{from}} =</h2>
    <h1>{{ result | number:'1.2-6' }} {{to}}</h1>
    <p>Taxa: 1 {{from}} = {{ rate | number:'1.6-10' }} {{to}}</p>
    <ion-note *ngIf="offline">Você está offline — usando última cotação disponível.</ion-note>
  </div>

</ion-content>